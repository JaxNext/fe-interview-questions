---
title: '00004 数字字符串格式化'
tags: ['算法', '重点']
---

# 题干

问题描述

https://www.marscode.cn/practice/7o260pdr1n45n6?problem_id=7424418560930512940

小M在工作时遇到了一个问题，他需要将用户输入的不带千分位逗号的数字字符串转换为带千分位逗号的格式，并且保留小数部分。小M还发现，有时候输入的数字字符串前面会有无用的 0，这些也需要精简掉。请你帮助小M编写程序，完成这个任务。

测试样例
样例1：

输入：s = "1294512.12412"
输出：'1,294,512.12412'

样例2：

输入：s = "0000123456789.99"
输出：'123,456,789.99'

样例3：

输入：s = "987654321"
输出：'987,654,321'

# 正确答案



# 总结

- replace(/^0+(\d)/, '$1') 是匹配了开头的 n 个 0 和第一个非 0 数字，把这部分替换成了那第一个非 0 数字
- 匹配每三个一组数字：/\d{3}+/g
- 要匹配到的是数字组前面的位置，所以要用 /(?=(\d{3})+)/g
- 但是这个位置不包括它在开头的情况，所以要用 \B 去限定该位置前面不能是单词边界 /\B(?=(\d{3})+)/g。
- (?!\d) 确保了让位置后面的数字正好能分成几组，最后一组后面不会留下不成组的一个或两个数。

<script>
  function func(str) {
    const x = str.replace(/^0+(\d)/, '$1')
    const [integer, decimal] = x.split('.')
    const reg = /\B(?=(\d{3})+(?!\d))/g

    const n = integer.replace(reg, ',')
    
    return [n, decimal].filter(x => x).join('.')
  }
  console.log(func('1294512.12412'))
  console.log(func('0000123456789.99'))
  console.log(func('987654321'))
</script>